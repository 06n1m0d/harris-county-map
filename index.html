<!DOCTYPE html>
<html>
<head>
  <title>FITHouston Walking & Transit Map</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Leaflet 1.9.4 CSS & JS -->
  <link rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
          crossorigin=""></script>
  <style>
    html, body { height: 100%; margin: 0; padding: 0; }
    #map        { height: 100%; width: 100%; }
    #map-title {
      position: absolute;
      top: 10px; left: 50px;
      background: #fff;
      border: 2px solid rgba(0,0,0,0.2);
      padding: 6px 8px;
      font-family: Helvetica, Arial, sans-serif;
      font-weight: bold; font-size: 24px;
      z-index: 800;
    }
  </style>
</head>
<body>
  <div id="map-title">FITHouston Walking & Transit</div>
  <div id="map"></div>

  <script>
    // Initialize map centered on Houston
    const map = L.map('map').setView([29.76, -95.37], 12);

    // Base tiles
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    // Walking location marker (example)
    const walkingLayer = L.layerGroup().addTo(map);
    L.marker([29.756, -95.367]).addTo(walkingLayer)
      .bindPopup("<strong>Discovery Green</strong><br>Example popâ€‘up text.");

    // Bus routes layer (initially empty)
    const busLayer = L.layerGroup();
    // Rail lines layer (initially empty)
    const railLayer = L.layerGroup();
    
    // ---- BUS ROUTES ----------------------------------
  fetch('https://www.gis.hctx.net/arcgishcpid/rest/services/Transportation/HC_Transportation/MapServer/8/query?where=1=1&outFields=RouteName&f=geojson')
    .then(r => r.json())
    .then(data => {
      L.geoJSON(data, {
        style: { color: '#0066cc', weight: 2, opacity: 0.7 },
        onEachFeature: (f, layer) =>
          layer.bindPopup(`<strong>Bus route:</strong> ${f.properties.RouteName || ''}`)
      }).addTo(busLayer);
    });

// ---- RAIL LINES ----------------------------------
  fetch('https://mycity2.houstontx.gov/pubgis02/rest/services/HoustonMap/Transportation/MapServer/11?f=pjson')
    .then(r => r.json())
    .then(data => {
      L.geoJSON(data, {
        style: { color: '#cc0000', weight: 20, opacity: 0.8 },
        onEachFeature: (f, layer) =>
          layer.bindPopup(`<strong>Rail line:</strong> ${f.properties.NAME || ''}`)
      }).addTo(railLayer);
  })
  .catch(err => console.error('Rail layer error:', err));
  


    // Add layers control so users can toggle overlays on/off
    const overlayMaps = {
      'Walking locations': walkingLayer,
      'Bus routes': busLayer,
      'Rail lines': railLayer
    };
    L.control.layers(null, overlayMaps, { collapsed: false }).addTo(map);
  </script>
</body>
</html>
